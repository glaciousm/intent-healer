# Intent Healer Configuration
# Copy this file to healer-config.yml and customize

healer:
  mode: AUTO_SAFE  # OFF, SUGGEST, AUTO_SAFE, AUTO_ALL
  enabled: true

llm:
  provider: openai  # openai, anthropic, local
  model: gpt-4o-mini
  api_key_env: OPENAI_API_KEY
  temperature: 0.1
  confidence_threshold: 0.80
  timeout_seconds: 30
  max_retries: 2
  max_tokens_per_request: 2000
  max_requests_per_test_run: 100
  max_cost_per_run_usd: 5.00

  # Fallback providers (tried if primary fails)
  fallback:
    - provider: anthropic
      model: claude-3-haiku-20240307
    # - provider: local
    #   model: llama3.1:8b

guardrails:
  min_confidence: 0.80
  max_heal_attempts_per_step: 2
  max_heals_per_scenario: 5
  forbidden_keywords:
    - delete
    - remove
    - cancel
    - unsubscribe
    - terminate
    - deactivate
  error_selectors:
    - ".error-banner"
    - ".alert-danger"
    - "[role='alert']"

snapshot:
  max_elements: 500
  include_hidden: false
  include_disabled: true
  capture_screenshot: true
  capture_dom: false
  max_text_length: 200

cache:
  enabled: true
  ttl_hours: 24
  max_entries: 10000
  storage: MEMORY  # MEMORY, FILE, REDIS
  file_path: .healer/cache

report:
  output_dir: build/healer-reports
  json_enabled: true
  html_enabled: true
  include_screenshots: true
  include_llm_prompts: false

circuit_breaker:
  enabled: true
  false_heal_rate_threshold: 0.01
  false_heal_rate_window_days: 7
  consecutive_failures_threshold: 3
  daily_cost_limit_usd: 10.00
  cooldown_minutes: 30
